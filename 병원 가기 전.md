미용실 예약하기

개피곤

병원 이상한 검사 30분 걸림
빨리풀면 10분이라던데다음은 PC의 '다운로드' 폴더에서 중복 파일을 삭제하는 Python 스크립트입니다. 이 스크립트는 파일 이름과 크기가 동일한 파일을 중복 파일로 간주하고, 가장 오래된 파일을 제외한 나머지를 삭제합니다.

**주의:** 이 스크립트는 파일을 영구적으로 삭제하므로 사용하기 전에 백업을 하는 것이 좋습니다.

```python
import os
import hashlib

def find_duplicate_files(directory):
    """
    지정된 디렉토리에서 중복 파일을 찾습니다.
    """
    file_dict = {}
    duplicates = []

    for filename in os.listdir(directory):
        file_path = os.path.join(directory, filename)

        # 파일인지 확인
        if os.path.isfile(file_path):
            file_size = os.path.getsize(file_path)

            # 파일 크기를 기준으로 그룹화
            if file_size in file_dict:
                file_dict[file_size].append(file_path)
            else:
                file_dict[file_size] = [file_path]

    # 크기가 같은 파일 그룹 내에서 내용이 같은 파일 찾기
    for size, files in file_dict.items():
        if len(files) > 1:
            hash_dict = {}
            for file_path in files:
                try:
                    with open(file_path, "rb") as f:
                        file_hash = hashlib.md5(f.read()).hexdigest()
                except Exception as e:
                    print(f"파일 처리 오류: {file_path} - {e}")
                    continue

                if file_hash in hash_dict:
                    duplicates.append(file_path)
                else:
                    hash_dict[file_hash] = file_path

    return duplicates

def delete_duplicate_files(duplicates):
    """
    중복 파일을 삭제합니다.
    """
    deleted_count = 0
    for file_path in duplicates:
        try:
            os.remove(file_path)
            print(f"삭제됨: {file_path}")
            deleted_count += 1
        except Exception as e:
            print(f"파일 삭제 오류: {file_path} - {e}")

    print(f"\n총 {deleted_count}개의 중복 파일이 삭제되었습니다.")

if __name__ == "__main__":
    download_directory = os.path.join(os.path.expanduser("~"), "Downloads")  # 다운로드 폴더 경로

    print("다운로드 폴더에서 중복 파일을 검색합니다...")
    duplicate_files = find_duplicate_files(download_directory)

    if duplicate_files:
        print("\n다음 파일들이 중복으로 확인되었습니다:")
        for file in duplicate_files:
            print(file)

        confirm = input("\n정말로 이 파일들을 삭제하시겠습니까? (y/n): ")
        if confirm.lower() == 'y':
            delete_duplicate_files(duplicate_files)
        else:
            print("삭제가 취소되었습니다.")
    else:
        print("중복 파일이 없습니다.")
```

**사용 방법:**

1.  위 코드를 복사하여 `.py` 확장자를 가진 파일로 저장합니다 (예: `remove_duplicates.py`).
2.  터미널 또는 명령 프롬프트를 열고 스크립트가 저장된 디렉토리로 이동합니다.
3.  다음 명령을 실행합니다:

    ```bash
    python remove_duplicates.py
    ```

스크립트는 다운로드 폴더에서 중복 파일을 검색하고, 사용자에게 삭제할지 여부를 묻습니다. 'y'를 입력하면 중복 파일이 삭제됩니다.

**참고:**

*   이 스크립트는 파일 내용의 MD5 해시값을 비교하여 중복 파일을 식별합니다.
*   스크립트를 실행하기 전에 중요한 파일은 백업해 두는 것이 좋습니다.
*   이 스크립트는 기본적인 중복 파일 삭제 기능을 제공하며, 필요에 따라 수정하여 사용할 수 있습니다. 예를 들어, 특정 파일 확장자만 검색하거나, 삭제 전에 파일을 이동하는 기능을 추가할 수 있습니다.